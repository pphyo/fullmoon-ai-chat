<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chatbot</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css" rel="stylesheet" />

    <style>
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 4px;
        }

        .prose pre {
            background: #1e1e1e;
            padding: 10px;
            border-radius: 6px;
            overflow-x: auto;
        }

        .prose code {
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            color: #e0e0e0;
        }

        .prose p {
            margin-bottom: 8px;
        }

        /* Title Fading Fix: Start Black, Fade only at the end */
        .marquee-container {
            overflow: hidden;
            white-space: nowrap;
            position: relative;
            mask-image: linear-gradient(to right, black 85%, transparent 100%);
            -webkit-mask-image: linear-gradient(to right, black 85%, transparent 100%);
        }

        .group:hover .action-buttons {
            display: flex;
        }
    </style>
</head>

<body class="bg-gray-900 text-gray-100 h-screen flex overflow-hidden font-sans">

    <aside class="w-64 bg-black flex flex-col border-r border-gray-800 flex-shrink-0 transition-all duration-300">
        <div class="p-3">
            <button id="new-chat-btn" onclick="initNewChat()"
                class="w-full flex items-center gap-2 border border-gray-700 rounded-md p-2 hover:bg-gray-800 transition text-sm text-left disabled:opacity-50 disabled:cursor-not-allowed">
                <div class="bg-white text-black rounded-full w-4 h-4 flex items-center justify-center">
                    <i class="ri-add-line text-xs font-bold"></i>
                </div>
                New Chat
            </button>
        </div>

        <div class="px-3 pb-2 text-[10px] font-semibold text-gray-500 uppercase tracking-wider">History</div>

        <div class="flex-1 overflow-y-auto px-2 space-y-0.5" id="history-list">
        </div>
    </aside>

    <main class="flex-1 flex flex-col relative bg-gray-900">
        <header class="p-4 flex justify-between items-center bg-gray-900/95 backdrop-blur z-10 sticky top-0">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center border border-gray-700">
                    <i id="current-model-icon" class="ri-ai-generate-3d-line text-lg text-white"></i>
                </div>

                <div class="relative group">
                    <select id="model-select"
                        class="appearance-none bg-transparent text-white text-sm font-medium focus:outline-none cursor-pointer pr-6 py-1">
                        <option disabled selected>Loading...</option>
                    </select>
                    <i
                        class="ri-arrow-down-s-line absolute right-0 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none group-hover:text-gray-300"></i>
                </div>
            </div>
        </header>

        <div id="chat-container" class="flex-1 overflow-y-auto p-4 pb-32 scroll-smooth">
            <div id="welcome-screen" class="flex flex-col items-center justify-center h-[80%] text-gray-500">
                <div class="w-16 h-16 bg-gray-800 rounded-2xl flex items-center justify-center mb-4">
                    <i class="ri-bilibili-fill text-3xl text-gray-500"></i>
                </div>
                <h2 class="text-xl font-semibold text-white mb-2">How can I help you?</h2>
            </div>
        </div>

        <div class="absolute bottom-0 w-full p-6 bg-gradient-to-t from-gray-900 via-gray-900 to-transparent">
            <div class="max-w-3xl mx-auto relative group">
                <input type="text" id="user-input"
                    class="w-full bg-[#2f2f2f] text-white rounded-3xl py-4 pl-6 pr-14 focus:outline-none focus:bg-[#3f3f3f] transition shadow-lg placeholder-gray-400"
                    placeholder="Message AI..." autocomplete="off">
                <button id="send-btn"
                    class="absolute right-2 top-2 bg-white text-black w-10 h-10 rounded-full hover:bg-gray-200 transition disabled:opacity-50 flex items-center justify-center">
                    <i class="ri-arrow-up-line font-bold"></i>
                </button>
            </div>
            <div class="text-center text-xs text-gray-500 mt-2">
                AI can make mistakes. Check important info.
            </div>
        </div>
    </main>

    <script src="script.js"></script>
</body>

</html>